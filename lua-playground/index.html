<!doctype html>
<html>
<head>
  <title>Lua IDE</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="./codemirror.min.css">
  <link rel="stylesheet" href="./solarized.min.css">
  <link rel="stylesheet" href="./lua.css">
  <script src="./codemirror.min.js"></script>
  <script src="./lua.min.js"></script>
</head>
<body>

  <h1>Lua IDE</h1>

  <button id="toggle-examples" class="examples-toggle">☰ Examples</button>
  <aside id="example-panel">
    <h2>Examples</h2>
    <ul id="example-list"></ul>
  </aside>

  <div class="editor-window">
    <div class="editor-bar">
      <span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span>
      <span class="title">Lua Editor</span>
    </div>
    <div class="editor-body">
      <textarea id="src"></textarea>
    </div>
  </div>

  <button id="run">▶ Run (Ctrl/⌘-Enter)</button>
  <button id="download">⤓ Download project (.zip)</button>

  <div class="terminal">
    <div class="terminal-bar">
      <span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span>
      <span class="title">Lua Console</span>
    </div>
    <div id="terminal-lua-wasi" class="terminal-body"></div>
  </div>

  <p>

  </p>


<script src="./coi-serviceworker.js"></script>
<script src="./xterm.min.js"></script>
<script src="./index.js"></script>
<script src="./src/stack.js"></script>
<script src="./worker.js"></script>
<script type="module">
  console.log(location.origin);
  const { master, slave } = startWasi(
    "terminal-lua-wasi",
    "/lua-playground/src/worker.js" + location.search,
    location.origin + "/lua-playground/containers/lua-wasi",
    3
  );
  import { initIde } from './ide.js';
  initIde(master);
</script>
</body>
</html>
